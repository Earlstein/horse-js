
/*! horse-js 27-09-2014 */
function MichaelBay(a){if(!a||!a.object||!$(a.object).length)throw new Error("required an object.");this.MichaelBays=[],this.options=$.extend(this.defaultOptions,a)}function Storm(a){if(!a||!a.object||!$(a.object).length)throw new Error("required an object.");this.storms=[],this.options=$.extend(this.defaultOptions,a)}MichaelBay.prototype.defaultOptions={spawners:8,minDelay:1e3,maxDelay:2e3,animation:null,minDuration:50,maxDuration:50},MichaelBay.prototype.options=function(a,b){if("undefined"==typeof a)return this.options;var c=this.options;if("undefined"==typeof b&&"object"==typeof a)$.extend(c,a);else{if("undefined"==typeof b)throw TypeError("unexpected configuration");var d={};d[a]=b,$.extend(c,d)}if(!this.validateOptions(c))throw Error("invalid parameter");return this.options=c,this},MichaelBay.prototype.validateOptions=function(a){return a&&"number"===a.spawners&&a.spawners>0&&"number"===a.minDelay&&a.minDelay>=0&&"number"===a.maxDelay&&a.maxDelay>=0&&a.minDelay<=a.maxDelay&&"number"===a.minDuration&&a.minDuration>=0&&"number"===a.maxDuration&&a.maxDuration>=0&&a.minDuration<=a.maxDuration&&a.object instanceof jQuery&&1===a.object.length&&("function"==typeof a.animation||null===a.animation)},MichaelBay.prototype.start=function(){if(this.MichaelBays.length||this.options.spawners<0)return this;for(var a=0;a<this.options.spawners;a++)this.MichaelBays.push(this.generateSpawner());return this},MichaelBay.prototype.generateSpawner=function(a){"undefined"==typeof a&&(a=this.MichaelBays.length);var b=this.options,c=$(b.object).first().clone().appendTo($("body")).css({position:"fixed",top:this.rand(0,window.innerHeight),left:this.rand(0,window.innerWidth)}),d=b.animation?$.proxy(b.animation,c):null;if(d)var e=this.rand(b.minDuration,b.maxDuration),f=window.setInterval(d,e);var g=this;return window.setTimeout(function(){window.clearInterval(f),c.remove(),g.MichaelBays[a]=g.generateSpawner(a)},this.rand(b.minDelay,b.maxDelay))},MichaelBay.prototype.stop=function(){var a=this.MichaelBays;this.MichaelBays=[];for(var b=0;b<a.length;b++)window.clearTimeout(a[b]);return this},MichaelBay.prototype.rand=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1),a>b)throw new RangeError("requested invalid range");return Math.floor(Math.random()*(b-a))+a},Storm.prototype.defaultOptions={spawners:20,minDelay:600,maxDelay:800,minDuration:200,maxDuration:600},Storm.prototype.options=function(a,b){if("undefined"==typeof a)return this.options;var c=this.options;if("undefined"==typeof b&&"object"==typeof a)$.extend(c,a);else{if("undefined"==typeof b)throw TypeError("unexpected configuration");var d={};d[a]=b,$.extend(c,d)}if(!this.validateOptions(c))throw Error("invalid parameter");return this.options=c,this},Storm.prototype.validateOptions=function(a){return a&&"number"===a.spawners&&a.spawners>0&&"number"===a.minDelay&&a.minDelay>=0&&"number"===a.maxDelay&&a.maxDelay>=0&&a.minDelay<=a.maxDelay&&"number"===a.minDuration&&a.minDuration>=0&&"number"===a.maxDuration&&a.maxDuration>=0&&a.minDuration<=a.maxDuration&&a.object instanceof jQuery&&1===a.object.length},Storm.prototype.start=function(){if(this.storms.length||this.options.spawners<0)return this;for(var a=0;a<this.options.spawners;a++)this.storms.push(this.generateSpawner());return this},Storm.prototype.generateSpawner=function(a){"undefined"==typeof a&&(a=this.storms.length);var b=this.options,c=$(b.object).first().clone().appendTo($("body"));c.css({position:"fixed",left:-1*c.width(),top:this.rand(0,window.innerHeight)}).animate({left:window.innerWidth},this.rand(b.minDuration,b.maxDuration),"linear",function(){c.remove()});var d=this;return window.setTimeout(function(){d.storms[a]=d.generateSpawner(a)},this.rand(b.minDelay,b.maxDelay))},Storm.prototype.stop=function(){var a=this.storms;this.storms=[];for(var b=0;b<a.length;b++)window.clearTimeout(a[b]);return this},Storm.prototype.rand=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1),a>b)throw new RangeError("requested invalid range");return Math.floor(Math.random()*(b-a))+a};