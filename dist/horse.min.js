
/*! horse-js 16-03-2015 */
function Cursor(a){this.opts=$.extend({},this.defaultOptions,a),this.cursors=["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],this.pos=0,this.interval=null}function Epilepsy(a){if(!a||!a.object||!$(a.object).length)throw new Error("required an object.");if(this.epilepsies=[],this.opts=$.extend({},this.defaultOptions,a),this.intervalProperty="__epilepsy",!this.validateOptions(this.opts))throw Error("invalid options for epilepsy")}function Runaway(a){for(var b in this.options)this[b]="undefined"!=typeof a&&a.hasOwnProperty(b)?a[b]:this.options[b]}function Spawner(a){if(!a||!a.object||!$(a.object).length)throw new Error("required an object.");this.opts=$.extend({},this.defaultOptions,a),this.timeout=null}function Storm(a){if(!a||!a.object||!$(a.object).length)throw new Error("required an object.");if(this.spawner=null,this.opts=$.extend({},this.defaultOptions,a),!this.validateOptions(this.opts))throw Error("invalid options for storm")}Cursor.prototype.defaultOptions={speed:40,target:"*",anti:!1},Cursor.prototype.blip=function(){$(this.opts.target).css("cursor",this.cursors[this.pos]),this.opts.anti&&0===this.pos?this.pos=this.cursors.length-1:this.opts.anti||this.pos!==this.cursors.length-1?this.opts.anti?this.pos--:this.pos++:this.pos=0},Cursor.prototype.start=function(){return this.timeout&&this.stop(),this.interval=window.setInterval(this.blip.bind(this),this.opts.speed),this},Cursor.prototype.stop=function(){return this.interval&&window.clearInterval(this.interval),this},Epilepsy.prototype.defaultOptions={spawners:8,minDelay:1e3,maxDelay:2e3,animation:null,minDuration:50,maxDuration:50},Epilepsy.prototype.validateOptions=function(a){return a&&"number"==typeof a.spawners&&a.spawners>0&&"number"==typeof a.minDelay&&a.minDelay>=0&&"number"==typeof a.maxDelay&&a.maxDelay>=0&&a.minDelay<=a.maxDelay&&"number"==typeof a.minDuration&&a.minDuration>=0&&"number"==typeof a.maxDuration&&a.maxDuration>=0&&a.minDuration<=a.maxDuration&&a.object instanceof jQuery&&1===a.object.length&&("function"==typeof a.animation||null===a.animation)},Epilepsy.prototype.start=function(){if(this.epilepsies.length||this.opts.spawners<0)return this;for(var a=0;a<this.opts.spawners;a++)this.epilepsies.push(this.generateSpawner());return this},Epilepsy.prototype.generateSpawner=function(){return new Spawner({object:$(this.opts.object),callback:this.seize.bind(this),minDelay:this.opts.minDelay,maxDelay:this.opts.maxDelay}).start()},Epilepsy.prototype.seize=function(a,b){if(a&&$(a).length){a=$(a),b instanceof jQuery&&(b.data(this.intervalProperty)&&window.clearInterval(b.data(this.intervalProperty)),b.remove()),a.css({position:"fixed",top:this.rand(0,window.innerHeight),left:this.rand(0,window.innerWidth)}).appendTo($("body"));var c=this.opts.animation?this.opts.animation.bind(a):null;if(c){var d=this.rand(this.opts.minDuration,this.opts.maxDuration);a.data(this.intervalProperty,window.setInterval(c,d))}}},Epilepsy.prototype.stop=function(){for(var a=0;a<this.epilepsies.length;a++)this.epilepsies[a].stop();return this.epilepsies=[],this},Epilepsy.prototype.rand=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1),a>b)throw new RangeError("requested invalid range");return Math.floor(Math.random()*(b-a+1))+a},$.fn.runaway=function(a){$.each(this,function(){"undefined"==typeof this.runaway&&(this.runaway=new Runaway(a)),this.runaway.start(this)})},$.fn.staystill=function(){$.each(this,function(){"undefined"!=typeof this.runaway&&this.runaway.stop()})},Runaway.prototype.options={proximity:50,velocity:50},Runaway.prototype.velocity=0,Runaway.prototype.thing=null,Runaway.prototype.window=null,Runaway.prototype.uniqueId="",Runaway.prototype.start=function(a){this.thing=$(a),this.window=$(window);var b=this.thing.offset();this.thing.css({left:b.left,top:b.top,position:"absolute","z-index":2147483647}),this.uniqueId=Math.random().toString(36).substr(2),this.window.on("mousemove.runaway"+this.uniqueId,$.proxy(this.run,this))},Runaway.prototype.run=function(a){var b=this.thing.offset(),c=this.thing.outerWidth()/2,d=this.thing.outerHeight()/2,e=[b.left+c,b.top+d],f=[a.pageX-e[0],a.pageY-e[1]];if(!(Math.abs(f[0])>this.proximity+c||Math.abs(f[1])>this.proximity+d)){var g=[Math.cos(f[0]),Math.sin(f[1])],h=[c*g[0],d*g[1]],i=this.distance(f,h);if(!(i>this.proximity)){var j=[this.velocity*g[0],this.velocity*g[1]],k=[b.left-j[0],b.top-j[1]];(k[0]<0||k[0]>this.window.width()||k[1]<0||k[1]>this.window.height())&&(k[0]=Math.floor(Math.random()*this.window.width()),k[1]=Math.floor(Math.random()*this.window.height())),this.thing.offset({left:k[0],top:k[1]})}}},Runaway.prototype.distance=function(a,b){return Math.floor(Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2)))},Runaway.prototype.stop=function(){this.thing.unbind("mouseover.runaway"+this.uniqueId)},Spawner.prototype.defaultOptions={minDelay:200,maxDelay:500,callback:null,object:null},Spawner.prototype.start=function(){return this.timeout||(this.timeout=window.setTimeout(this.spawner().bind(this),this.rand(this.opts.minDelay,this.opts.maxDelay))),this},Spawner.prototype.stop=function(){return this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null),this},Spawner.prototype.spawner=function(a){void 0===typeof a&&(a=null);var b=this.opts.object&&$(this.opts.object.length)?$(this.opts.object).first().clone():null,c=this.opts.callback&&"function"==typeof this.opts.callback?this.opts.callback:null;return function(){c(b,a),this.timeout=window.setTimeout(this.spawner(b).bind(this),this.rand(this.opts.minDelay,this.opts.maxDelay))}.bind(this)},Spawner.prototype.rand=function(a,b){if(a=parseInt(a,10),b=parseInt(b,10),"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1),a>b)throw new RangeError("requested invalid range");return a===b?a:Math.floor(Math.random()*(b-a+1))+a},Storm.prototype.defaultOptions={minDelay:100,maxDelay:200,minDuration:200,maxDuration:600},Storm.prototype.validateOptions=function(a){return a&&"number"==typeof a.minDelay&&a.minDelay>=0&&"number"==typeof a.maxDelay&&a.maxDelay>=0&&a.minDelay<=a.maxDelay&&"number"==typeof a.minDuration&&a.minDuration>=0&&"number"==typeof a.maxDuration&&a.maxDuration>=0&&a.minDuration<=a.maxDuration&&a.object instanceof jQuery&&1===a.object.length},Storm.prototype.start=function(){return this.spawner&&this.spawner.stop(),this.spawner=new Spawner({object:$(this.opts.object),callback:this.storm.bind(this),minDelay:this.opts.minDelay,maxDelay:this.opts.maxDelay}).start(),this},Storm.prototype.storm=function(a){a&&$(a).length&&a.css({position:"fixed",left:-1*a.width(),top:this.rand(0,window.innerHeight)}).animate({left:window.innerWidth},this.rand(this.opts.minDuration,this.opts.maxDuration),"linear",function(){a.remove()}).appendTo($("body"))},Storm.prototype.stop=function(){return this.spawner&&this.spawner.stop(),this.spawner=null,this},Storm.prototype.rand=function(a,b){if("undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=1),a>b)throw new RangeError("requested invalid range");return Math.floor(Math.random()*(b-a+1))+a};